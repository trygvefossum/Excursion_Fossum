% For testing whether an argument of a macro is empty.
\usepackage{xifthen}
\usepackage{bm}
\usepackage{bbm}

% ----------------------------
% Domain, outputs and GP.
% ----------------------------

\newcommand{\dl}{\mathrm{d}\lambda}
\newcommand{\R}{\mathbb{R}}
\newcommand{\x}{u}
\newcommand{\uu}{u}
\newcommand{\vv}{v}

% ---------------------------------
% Cedric's Macros
% ---------------------------------

% Generic spatial location.
\newcommand{\spatloc}{u}

% Current data collection stage.
\newcommand{\stage}{n}

% Set of candidate points when choosing next observation location.
\newcommand{\candidates}{\mathcal{J}}

% EIBV, IBV and stuff.
\newcommand{\EIBV}{\operatorname{EIBV}}
\newcommand{\currentEIBV}{\operatorname{EIBV}_{\stage}}

\newcommand{\IBV}{\operatorname{IBV}}
\newcommand{\currentIBV}{\operatorname{IBV}_{\stage}}


\newtheorem*{criterion}{Criterion}
% ---------------------------------
% ---------------------------------


%\newcommand{\bt}{t}
\newcommand{\T}{T}
\newcommand{\es}{\Gamma}%\mathrm{ES}}
\newcommand{\ibv}{\mathrm{IBV}}
\newcommand{\emv}{\mathrm{EMV}}
\newcommand{\eibv}{\mathrm{EIBV}}
\newcommand{\eemv}{\mathrm{EEMV}}
\newcommand{\mes}{\nu}
% \newcommand{\gp}{\xi}
\newcommand{\no}{p}
\newcommand{\domain}{\mathcal{M}}
\newcommand{\eps}{\varepsilon}
\newcommand{\sigeps}{\Sigma_{\eps}}
\newcommand{\cov}{\operatorname{Cov}}
\newcommand{\norm}{\mathcal{N}}

% Field value at x. Can either switch between parenthesis or subscripting.
% If no argument provided, then will just print xi.
\newcommand{\gp}[1][]{
    \ifthenelse{\isempty{#1}}
    {Z}
    {Z_{#1}}
}

% ----------------------------
% THEOREMS
% ----------------------------
\newtheorem{propo}{Proposition}
\newtheorem{theorem}{Theorem}
\newtheorem{remark}{Remark}
\newtheorem*{remark*}{Remark}
% ----------------------------

\DeclareMathOperator*{\argmin}{\arg\!\min}

% Mean and cov at time zero.
\newcommand{\mean}[1]{\mu
\left(#1\right)}
\newcommand{\covmat}[1]{K
\left(#1\right)}

% Product measure.
\newcommand{\productMeasure}{
\mathrm{d}\nu^{\otimes}\left(\bm{u}\right)}

% Misc. covariance matrices
\newcommand{\covV}{C_{V}}
\newcommand{\covN}{C}


% Covariance function k(., .).
\newcommand{\covFunc}[4]{k_{#2#4}\left(#1,#3\right)}

% Covariance matrix K = k(X, X).
\newcommand{\covMat}[4]{\bm{K}_{#2#4}(#1#3)}

% Mean function \mu(x).
\newcommand{\meanFunc}[2]{\mu_{#2}\left(#1\right)}

% Mean vector \mu(X).
\newcommand{\meanVec}[2]{\bm{\mu}_{#2}(#1)}

% Excursion probability in the set T^r.
\newcommand{\jointExcuProb}{
    \mathbb{P}\left(
    \gp[\bm{u}]\in T^r \right)
}

% In Proposition 1, the mean vector at the uu concatenation and the
% corresponding covariance matrix.
\newcommand{\meanUU}{
    \mu(\bm{u})
}

\newcommand{\covUU}{
    K\left(\bm{u},\bm{u}\right)
}

% ----------
% SEQUENTIAL
% ----------
% Probability distribution now (after 1 conditioning).
\newcommand{\currentProba}[1]{\mathbb{P}_{\stage}
\left(#1\right)}
% Probability distribution in the future (after 2 conditioning).
\newcommand{\futureProba}[1]{\mathbb{P}_{\stage + 1}
\left(#1\right)}

% Same for expectations.
\newcommand{\currentExp}[1]{\mathbb{E}_{\stage}
\left[#1\right]}
\newcommand{\futureExp}[1]{\mathbb{E}_{\stage + 1}
\left[#1\right]}

% For mean vectors.
\newcommand{\currentMean}[1]{\mu_{[\stage]}
\left(#1\right)}
\newcommand{\futureMean}[1]{\mu_{[\stage + 1]}
\left(#1\right)}

% And covariance function.
\newcommand{\currentCovFun}[1]{k_{[\stage]}
\left(#1\right)}
\newcommand{\futureCovFun}[1]{k_{[\stage + 1]}
\left(#1\right)}

% And covariance matrices.
\newcommand{\currentCov}[1]{K_{[\stage]}
\left(#1\right)}
\newcommand{\futureCov}[1]{K_{[\stage + 1]}
\left(#1\right)}


% For nice expectations.
\usepackage{mathtools}
\newcommand{\expect}{\mathbb{E}\expectarg}
\DeclarePairedDelimiterX{\expectarg}[1]{[}{]}{%
  \ifnum\currentgrouptype=16 \else\begingroup\fi
  \activatebar#1
  \ifnum\currentgrouptype=16 \else\endgroup\fi
}

\newcommand{\innermid}{\nonscript\;\delimsize\vert\nonscript\;}
\newcommand{\activatebar}{%
  \begingroup\lccode`\~=`\|
  \lowercase{\endgroup\let~}\innermid
  \mathcode`|=\string"8000
}
